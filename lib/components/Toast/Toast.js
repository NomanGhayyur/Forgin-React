"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&("get"in s?t.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,s)}:function(e,t,r,a){e[a=void 0===a?r:a]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,s,o=r.call(e),n=[];try{for(;(void 0===t||0<t--)&&!(a=o.next()).done;)n.push(a.value)}catch(e){s={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return n},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},react_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importStar(require("react"))),react_dom_1=__importDefault(require("react-dom")),__1=require(".."),aphrodite_1=require("../../helpers/aphrodite"),Toast_styles_1=__importDefault(require("./Toast.styles")),Toast=react_1.default.forwardRef(function(a,e){var t=__read((0,react_1.useState)(!!a.show),2),s=t[0],o=t[1],t=__read((0,react_1.useState)(a.title||""),2),r=t[0],n=t[1],t=__read((0,react_1.useState)(a.children),2),c=t[0],i=t[1],t=__read((0,react_1.useState)(a.autoDismissTimeout),2),u=t[0],l=t[1],t=__read((0,react_1.useState)(a.type),2),d=t[0],_=t[1],f=(0,Toast_styles_1.default)({show:s,direction:a.direction}),m=(0,react_1.useRef)(),p=(0,react_1.useRef)(null),h=(0,react_1.useRef)(null),w=(0,react_1.useRef)(0),y=(0,react_1.useRef)(0);(0,react_1.useEffect)(function(){o(!!a.show)},[a.show]),(0,react_1.useEffect)(function(){var e,t,r;window.clearTimeout(w.current),window.clearInterval(y.current),"show"in a||!s||!u||(a.progress?(t=u/100,r=100,null!=(e=p.current)&&e.setProgress(100),window.clearInterval(y.current),y.current=window.setInterval(function(){var e;if(r<0)return w.current=window.setTimeout(function(){return o(!1)},t),window.clearInterval(y.current);r-=1,null!=(e=p.current)&&e.unsafeShowProgress(r)},t)):w.current=window.setTimeout(function(){return o(!1)},u))},[s,a,u]),(0,react_1.useEffect)(function(){var e=document.body;m.current=m.current||document.createElement("section"),m.current.setAttribute("class",(0,aphrodite_1.css)(f.sectionWrapper)),m.current.setAttribute("data-test","ToastSectionWrapper"),m.current&&(e.className="".concat(e.className.replace((0,aphrodite_1.css)(f.body),"")," ").concat((0,aphrodite_1.css)(f.body)).trim(),e.appendChild(m.current))},[s,f]),(0,react_1.useImperativeHandle)(e,function(){return{showToast:function(e){"title"in e&&n(e.title),"body"in e&&i(e.body),"autoDismissTimeout"in e&&l(e.autoDismissTimeout),"type"in e&&_(e.type),o(!("show"in e)||e.show)}}},[]);return m.current?react_dom_1.default.createPortal(react_1.default.createElement("div",{ref:h,"data-test":"ToastContainer",onAnimationEnd:function(){var e=document.body;!s&&h.current&&(e.className=e.className.replace((0,aphrodite_1.css)(f.body),""),h.current.className=h.current.className.trim()+" show")},id:a.id,style:a.style,className:"toast show border border-".concat(d," ").concat((0,aphrodite_1.css)(f.container)," ").concat(a.className||"").trim(),role:"alert","aria-live":"assertive","aria-atomic":"true"},s&&r&&"string"==typeof r?react_1.default.createElement("div",{"data-test":"ToastHeader",className:"toast-header"},react_1.default.createElement("strong",{className:"mr-auto text-".concat(d)},r)):null,s&&r&&"string"!=typeof r?react_1.default.createElement("div",{"data-test":"ToastHeader",className:"toast-header"},r):null,s?react_1.default.createElement(__1.Icon,{name:"x",width:"1.5rem",height:"1.5rem",className:(0,aphrodite_1.css)(f.closeBtn),onClick:function(){window.clearTimeout(w.current),window.clearInterval(y.current),o(!1),a.onDismiss&&a.onDismiss()}}):null,s&&c?react_1.default.createElement("div",{"data-test":"ToastBody",className:"toast-body"},c):null,s&&u&&a.progress?react_1.default.createElement(__1.Progress,{ref:p,"data-test":"ToastProgress",type:d,className:(0,aphrodite_1.css)(f.progress)}):null),m.current):null});Toast.defaultProps={className:"",direction:"top-right",progress:!0,autoDismissTimeout:2500},Toast.displayName="Toast",exports.default=Toast;